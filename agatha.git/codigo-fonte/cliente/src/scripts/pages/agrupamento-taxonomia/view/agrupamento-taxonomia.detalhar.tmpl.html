<md-content flex>

    <form name="formRegistro" ng-submit="scope.persistir(scope.registro)" novalidate>

        <div class="sgr-container">

            <div class="sgr-container-header" layout="row">
                <div class="md-toolbar-tools">
                    <h3 style="font-size: 18px">
                        <sgr-glossario termo="Agrupar Taxonomias"></sgr-glossario>
                    </h3>
                </div>
            </div>

            <div class="sgr-container-body" layout="row" layout-xs="column">

                <md-input-container class="md-block" flex-gt-xs flex="50">
                    <label>
                        <sgr-glossario termo="Taxonomias existentes"></sgr-glossario>
                    </label>
                    <md-autocomplete class="md-autocomplete-icon" md-floating-label="" md-no-cache="true" md-search-text-change="scope.getTaxonomiaBySearch(scope.taxonomia.descricao)" md-search-text="scope.taxonomia.descricao" md-selected-item-change="scope.taxonomia = item" md-item-text="scope.taxonomia.descricao" md-items="item in scope._taxonomias" md-min-length="2">
                        <md-item-template>
                            <span md-highlight-text="scope.taxonomia.descricao" md-highlight-flags="^i">{{item.descricao}}</span>
                        </md-item-template>
                    </md-autocomplete>
                </md-input-container>

            </div>

            <div class="sgr-container-table" layout="column">
                <md-card>
                    <md-table-container>
                        <table md-table>
                            <thead md-head>
                            <tr md-row>
                                <th md-column class="text-center" width="80px">
                                    <sgr-glossario termo="Item"></sgr-glossario>
                                </th>
                                <th md-column>
                                    <sgr-glossario termo="Descrição da Taxonomia"></sgr-glossario>
                                </th>
                                <th md-column class="text-center" width="150px">
                                    <sgr-glossario termo="Ação"></sgr-glossario>
                                </th>
                            </tr>
                            </thead>

                            <tbody md-body>
                            <tr md-row ng-repeat="item in scope.registro.taxonomias">
                                <td md-cell class="text-center">
                                    <span ng-bind="$index + 1"></span>
                                </td>
                                <td md-cell>
                                    {{item.descricao}}
                                </td>

                                <td md-cell class="text-center cell-options" width="60px">

                                    <a ng-click="scope.excluirTaxonomia(item)" class="cursor-pointer">
                                        <md-tooltip md-direction="top">
                                            Excluir
                                        </md-tooltip>
                                        <ng-md-icon icon="delete"></ng-md-icon>
                                    </a>

                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </md-table-container>
                </md-card>
            </div>

            <div layout="row" layout-xs="column">

                <md-input-container class="md-block" flex-gt-xs flex="50">
                    <label>
                        <sgr-glossario termo="Descrição Padronizada"></sgr-glossario>
                    </label>
                    <input ng-model="scope.registro.taxonomia.descricao" type="text" required/>
                </md-input-container>

            </div>

            <div class="sgr-container-buttons m-t-10 m-b-10" layout="row" layout-align="end">
                <section layout="row center" layout-sm="column" layout-wrap>
                    <div layout="row" layout-align="space-around center">
                        <md-button class="md-primary" ui-sref="taxonomia.listar">
                            <md-icon md-font-set="material-icons">close</md-icon>
                            <sgr-glossario termo="Cancelar"></sgr-glossario>
                        </md-button>
                        <md-button class="md-primary md-raised" type="submit">
                            <md-icon md-font-set="material-icons">done</md-icon>
                            <sgr-glossario termo="Salvar"></sgr-glossario>
                        </md-button>
                    </div>
                </section>
            </div>

        </div>

    </form>

</md-content>

